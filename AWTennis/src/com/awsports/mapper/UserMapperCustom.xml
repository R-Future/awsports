<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace为mapper.java借口的类名 -->
<mapper namespace="com.awsports.mapper.UserMapperCustom">
	
	<!-- sql片段，用户信息查询条件 -->
	<sql id="query_user_where">
		<if test="user!=null">
			<if test="user.name!=null and user.name!=''">
				and aw_user.name like '%${user.name}%'
			</if>
			<if test="user.address!=null and user.address!=''">
				and aw_user.address like '%${user.address}%'
			</if>
			<if test="user.level!=null and user.level!=''">
				and aw_user.level=#{user.level}
			</if>
		</if>
	</sql>
	<!-- id对应mapper.java接口中的方法名 -->
	<select id="findAll" parameterType="com.awsports.pojo.UserQuery" resultType="com.awsports.pojo.User">
		select * from aw_user
		<where>
			<include refid="query_user_where"></include>
		</where>
	</select>
	
	<select id="findById" parameterType="Integer" resultType="com.awsports.pojo.User">
		select * from aw_user where id=#{id}
	</select>
	
	<!-- 更新用户信息 -->
	<update id="updateById" parameterType="com.awsports.pojo.User">
		update aw_user
	    set name = #{name,jdbcType=CHAR},
	      password = #{password,jdbcType=CHAR},
	      nickname = #{nickname,jdbcType=CHAR},
	      portrait = #{portrait,jdbcType=CHAR},
	      realName = #{realname,jdbcType=CHAR},
	      idcard = #{idcard,jdbcType=CHAR},
	      phone = #{phone,jdbcType=CHAR},
	      email = #{email,jdbcType=CHAR},
	      sex = #{sex,jdbcType=BIT},
	      height = #{height,jdbcType=DOUBLE},
	      weight = #{weight,jdbcType=DOUBLE},
	      level = #{level,jdbcType=DOUBLE},
	      playedYears = #{playedyears,jdbcType=DOUBLE},
	      forehand = #{forehand,jdbcType=INTEGER},
	      backhand = #{backhand,jdbcType=BIT},
	      address = #{address,jdbcType=CHAR},
	      singleTitles = #{singletitles,jdbcType=INTEGER},
	      doubleTitles = #{doubletitles,jdbcType=INTEGER},
	      created_at = #{createdAt,jdbcType=TIMESTAMP},
	      updated_at = #{updatedAt,jdbcType=TIMESTAMP},
	      invalid = #{invalid,jdbcType=BIT}
	    where id = #{id,jdbcType=INTEGER}
	</update>
</mapper>